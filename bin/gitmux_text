#!/usr/bin/env bash

if [ -z "$1" ]; then
  dir="$(pwd)"
else
  dir="$1"
fi

if is_git_repo "$dir"; then
  output=$(gitmux -cfg "$XDG_CONFIG_HOME/gitmux/gitmux.conf" "$dir")
elif git --git-dir="$dir/.bare" rev-parse --git-dir &>/dev/null 2>&1; then
  # Bare worktree parent directory — no active branch, show a static indicator
  output="#[fg=white,bold]_bare_#[none]"
else
  output=""
fi

echo "$output"
